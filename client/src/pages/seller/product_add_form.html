<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DigiDukaan - Add Product</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
    };
  </script>

  <!-- React + ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-sky-100 to-white text-gray-800 dark:from-gray-900 dark:via-gray-800 dark:to-black dark:text-gray-100 transition-colors duration-500">
  <div id="root"></div>

  <script type="text/babel">
    function ProductForm() {
      const [darkMode, setDarkMode] = React.useState(true);
      const [formData, setFormData] = React.useState({
        title: "",
        slug: "",
        description: "",
        category: "",
        subCategory: "",
        price: "",
        discountPercentage: "",
        discountAmount: "",
        stock: "",
        brand: "",
        isAvailable: true,
        tags: [],
        attributes: [{ key: "", value: "" }],
        images: [],
        video: null
      });

      const [tagInput, setTagInput] = React.useState("");

      // Handle inputs
      const handleChange = (e) => {
        const { name, value, type, checked } = e.target;
        setFormData({
          ...formData,
          [name]: type === "checkbox" ? checked : value
        });
      };

      const handleAttributeChange = (index, field, value) => {
        const updated = [...formData.attributes];
        updated[index][field] = value;
        setFormData({ ...formData, attributes: updated });
      };

      const addAttribute = () => {
        setFormData({
          ...formData,
          attributes: [...formData.attributes, { key: "", value: "" }]
        });
      };

      const removeAttribute = (index) => {
        const updated = [...formData.attributes];
        updated.splice(index, 1);
        setFormData({ ...formData, attributes: updated });
      };

      const handleTagAdd = (e) => {
        e.preventDefault();
        if (tagInput.trim() !== "" && !formData.tags.includes(tagInput)) {
          setFormData({ ...formData, tags: [...formData.tags, tagInput] });
          setTagInput("");
        }
      };

      const removeTag = (tag) => {
        setFormData({ ...formData, tags: formData.tags.filter((t) => t !== tag) });
      };

      const handleImageUpload = (e) => {
        const files = Array.from(e.target.files);
        setFormData({ ...formData, images: [...formData.images, ...files] });
      };

      const handleVideoUpload = (e) => {
        setFormData({ ...formData, video: e.target.files[0] });
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        console.log("Product Data Submitted:", formData);
        alert("‚úÖ Product added successfully!");
      };

      // Toggle dark/light mode
      React.useEffect(() => {
        if (darkMode) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
      }, [darkMode]);

      return (
        <div className="min-h-screen py-10 relative">
          {/* Floating Dark Mode Button */}
          <button
            onClick={() => setDarkMode(!darkMode)}
            className="absolute top-4 right-4 p-2 rounded-full shadow-lg bg-sky-500 text-white hover:bg-sky-600 transition"
            title={darkMode ? "Switch to Light Mode" : "Switch to Dark Mode"}
          >
            {darkMode ? "‚òÄÔ∏è" : "üåô"}
          </button>

          {/* Page Title */}
          <div className="flex justify-center mb-6">
            <h1 className="text-3xl font-bold text-sky-700 dark:text-sky-300">
              Add New Product
            </h1>
          </div>

          {/* Form */}
          <div className="max-w-5xl mx-auto px-6 py-10 bg-white dark:bg-gray-800 shadow-xl rounded-2xl transition-colors duration-500">
            <form onSubmit={handleSubmit} className="space-y-8">
              {/* Basic Info */}
              <div className="grid sm:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium mb-1">Title *</label>
                  <input type="text" name="title" value={formData.title} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">Slug *</label>
                  <input type="text" name="slug" value={formData.slug} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium mb-1">Description *</label>
                <textarea name="description" value={formData.description} onChange={handleChange} required rows="3" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600"></textarea>
              </div>

              {/* Category */}
              <div className="grid sm:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium mb-1">Category *</label>
                  <input type="text" name="category" value={formData.category} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">SubCategory *</label>
                  <input type="text" name="subCategory" value={formData.subCategory} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
              </div>

              {/* Pricing */}
              <div className="grid sm:grid-cols-3 gap-6">
                <div>
                  <label className="block text-sm font-medium mb-1">Price *</label>
                  <input type="number" name="price" value={formData.price} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">Discount %</label>
                  <input type="number" name="discountPercentage" value={formData.discountPercentage} onChange={handleChange} min="0" max="100" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">Discount Amount</label>
                  <input type="number" name="discountAmount" value={formData.discountAmount} onChange={handleChange} min="0" className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
              </div>

              {/* Media Uploads */}
              <div>
                <label className="block text-sm font-medium mb-1">Product Images *</label>
                <input type="file" multiple accept="image/*" onChange={handleImageUpload} className="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" />
                <div className="flex flex-wrap gap-3 mt-3">
                  {formData.images.map((file, i) => (
                    <img key={i} src={URL.createObjectURL(file)} alt="preview" className="h-20 w-20 object-cover rounded-lg shadow" />
                  ))}
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium mb-1">Product Video</label>
                <input type="file" accept="video/*" onChange={handleVideoUpload} className="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" />
                {formData.video && (
                  <video controls className="mt-3 w-40 rounded-lg shadow">
                    <source src={URL.createObjectURL(formData.video)} type="video/mp4" />
                  </video>
                )}
              </div>

              {/* Inventory */}
              <div className="grid sm:grid-cols-3 gap-6">
                <div>
                  <label className="block text-sm font-medium mb-1">Stock *</label>
                  <input type="number" name="stock" value={formData.stock} onChange={handleChange} required className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">Brand</label>
                  <input type="text" name="brand" value={formData.brand} onChange={handleChange} className="w-full border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                </div>
                <div className="flex items-center mt-6">
                  <input type="checkbox" name="isAvailable" checked={formData.isAvailable} onChange={handleChange} className="h-4 w-4 text-sky-500 mr-2" />
                  <label className="text-sm">Available</label>
                </div>
              </div>

              {/* Tags */}
              <div>
                <label className="block text-sm font-medium mb-2">Tags</label>
                <div className="flex gap-2">
                  <input type="text" value={tagInput} onChange={(e) => setTagInput(e.target.value)} placeholder="Enter tag & press Add" className="flex-1 border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                  <button onClick={handleTagAdd} className="px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition">Add</button>
                </div>
                <div className="flex flex-wrap gap-2 mt-3">
                  {formData.tags.map((tag, i) => (
                    <span key={i} className="bg-sky-100 text-sky-700 px-3 py-1 rounded-full text-sm flex items-center gap-2 dark:bg-sky-800 dark:text-sky-200">
                      {tag}
                      <button type="button" onClick={() => removeTag(tag)} className="text-red-500 font-bold">√ó</button>
                    </span>
                  ))}
                </div>
              </div>

              {/* Attributes */}
              <div>
                <label className="block text-sm font-medium mb-2">Attributes</label>
                {formData.attributes.map((attr, index) => (
                  <div key={index} className="flex gap-4 mb-2">
                    <input type="text" placeholder="Key (e.g. Color)" value={attr.key} onChange={(e) => handleAttributeChange(index, "key", e.target.value)} className="flex-1 border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                    <input type="text" placeholder="Value (e.g. Red)" value={attr.value} onChange={(e) => handleAttributeChange(index, "value", e.target.value)} className="flex-1 border rounded-lg p-2 focus:ring-2 focus:ring-sky-400 dark:bg-gray-700 dark:border-gray-600" />
                    <button type="button" onClick={() => removeAttribute(index)} className="px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600">X</button>
                  </div>
                ))}
                <button type="button" onClick={addAttribute} className="mt-2 px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition">+ Add Attribute</button>
              </div>

              {/* Submit */}
              <div className="text-center">
                <button type="submit" className="px-8 py-3 bg-blue-600 text-white rounded-xl shadow-lg hover:bg-blue-700 transition transform hover:scale-105">
                  üöÄ Add Product
                </button>
              </div>
            </form>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<ProductForm />);
  </script>
</body>
</html>